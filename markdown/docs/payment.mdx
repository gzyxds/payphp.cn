---
# 页面元数据配置
title: "支付管理" # 页面标题
description: "PayPHP码支付系统支付管理指南" # 页面描述
date: "2024-01-22" # 最后更新日期
category: "使用指南" # 文档分类
subcategory: "基础功能" # 文档子分类
order: 2 # 文档排序
icon: "💰" # 文档图标
---

# 支付管理指南

PayPHP 码支付系统提供了全面的支付管理功能，帮助您轻松处理各类支付业务。本文档将详细介绍支付管理的各项功能及使用方法。

## 支付流程概述

在深入了解支付管理功能前，先了解 PayPHP 码支付系统的基本支付流程：

1. **创建订单**：商户通过API或商户后台创建支付订单
2. **生成支付链接/二维码**：系统生成支付链接或二维码
3. **用户支付**：用户通过支付链接或扫描二维码完成支付
4. **支付通知**：系统接收支付平台的支付结果通知
5. **订单更新**：系统更新订单状态并通知商户
6. **交易完成**：完成整个支付流程

![支付流程图](https://placeholder-image.com/payment-flow.jpg)

## 支付方式管理

PayPHP 码支付系统支持多种支付方式，您可以在后台灵活配置和管理。

### 支持的支付方式

1. **扫码支付**
   - 微信扫码支付
   - 支付宝扫码支付
   - QQ钱包扫码支付
   - 银联扫码支付

2. **H5支付**
   - 微信H5支付
   - 支付宝H5支付
   - 银联在线支付

3. **APP支付**
   - 微信APP支付
   - 支付宝APP支付

4. **小程序支付**
   - 微信小程序支付
   - 支付宝小程序支付

5. **JSAPI支付**
   - 微信公众号支付
   - 支付宝生活号支付

### 配置支付方式

1. 登录管理后台，进入 "支付管理" → "支付方式"
2. 点击 "添加支付方式" 或选择已有支付方式进行编辑
3. 填写以下信息：
   - 支付方式名称
   - 支付渠道（微信、支付宝等）
   - 支付类型（扫码、H5等）
   - 渠道参数（根据不同渠道填写相应参数）
   - 手续费率
   - 显示顺序
   - 状态（启用/禁用）

![支付方式配置](https://placeholder-image.com/payment-method-config.jpg)

### 支付方式排序

您可以调整支付方式的显示顺序，将常用的支付方式排在前面：

1. 进入 "支付管理" → "支付方式"
2. 点击 "排序" 按钮
3. 拖动支付方式调整顺序
4. 点击 "保存" 按钮确认更改

## 支付渠道管理

支付渠道是实际处理支付的第三方平台，如微信支付、支付宝等。

### 渠道配置

1. 进入 "支付管理" → "支付渠道"
2. 点击 "添加渠道" 或选择已有渠道进行编辑
3. 填写渠道信息：

#### 微信支付配置

- 商户ID (mch_id)
- 商户密钥 (key)
- APPID
- 证书文件（API证书）

#### 支付宝配置

- 应用ID (app_id)
- 商户私钥 (private_key)
- 支付宝公钥 (alipay_public_key)
- 回调地址

#### QQ钱包配置

- 商户ID
- 商户密钥
- 应用ID

#### 银联支付配置

- 商户号
- 证书路径
- 证书密码

### 渠道测试

配置完成后，您可以进行渠道测试，确保配置正确：

1. 进入 "支付管理" → "支付渠道"
2. 选择要测试的渠道，点击 "测试" 按钮
3. 输入测试金额（通常为1分钱）
4. 系统会生成测试订单和支付二维码
5. 使用对应的支付工具完成支付
6. 系统会显示测试结果和回调信息

## 订单管理

订单管理是支付系统的核心功能，PayPHP 码支付系统提供了强大的订单管理工具。

### 订单列表

进入 "支付管理" → "订单列表"，您可以看到所有支付订单，支持以下功能：

- **搜索功能**：按订单号、商户订单号、商户ID等搜索
- **筛选功能**：按支付状态、支付方式、时间范围等筛选
- **排序功能**：按创建时间、支付时间、金额等排序
- **批量操作**：支持批量导出、批量标记等操作

![订单列表](https://placeholder-image.com/order-list.jpg)

### 订单详情

点击订单列表中的订单号，可查看订单详细信息：

- **基本信息**：订单号、创建时间、支付时间、金额等
- **商户信息**：商户ID、商户名称、商户订单号等
- **支付信息**：支付方式、支付状态、交易流水号等
- **回调记录**：显示通知回调的历史记录和状态
- **操作日志**：显示与该订单相关的所有操作记录

### 订单操作

- **查看二维码**：查看订单的支付二维码
- **复制支付链接**：复制订单的支付链接
- **手动补单**：对未成功支付的订单进行手动补单
- **重发通知**：对已支付但回调失败的订单重新发送通知
- **取消订单**：取消未支付的订单
- **退款操作**：对已支付的订单进行退款处理

## 退款管理

PayPHP 码支付系统支持对已支付的订单进行退款操作。

### 申请退款

1. 进入 "支付管理" → "订单列表"
2. 找到需要退款的订单，点击 "退款" 按钮
3. 填写退款信息：
   - 退款金额（可部分退款）
   - 退款原因
   - 退款备注
4. 点击 "确认退款" 按钮

### 退款列表

进入 "支付管理" → "退款列表"，可查看所有退款记录：

- 退款单号
- 关联订单号
- 退款金额
- 退款状态
- 申请时间
- 处理时间
- 操作人员

### 退款详情

点击退款列表中的退款单号，可查看退款详细信息：

- 退款基本信息
- 原订单信息
- 退款处理记录
- 退款回调记录

## 支付页面定制

PayPHP 码支付系统允许您自定义支付页面，提升用户体验。

### 页面模板

1. 进入 "支付管理" → "页面设置" → "模板管理"
2. 系统提供多个预设模板，您可以选择使用或自定义
3. 点击 "预览" 按钮可查看模板效果
4. 点击 "使用" 按钮应用模板

### 自定义设置

1. 进入 "支付管理" → "页面设置" → "自定义设置"
2. 您可以自定义以下元素：
   - 页面标题
   - Logo图片
   - 背景颜色/图片
   - 按钮颜色
   - 文字样式
   - 页脚信息
3. 点击 "保存" 按钮应用设置
4. 点击 "预览" 按钮查看效果

![支付页面定制](https://placeholder-image.com/payment-page-custom.jpg)

## 支付通知管理

支付通知是确保商户系统及时获知支付结果的关键环节。

### 通知设置

1. 进入 "支付管理" → "通知设置"
2. 配置以下参数：
   - 通知重试次数
   - 通知重试间隔
   - 通知超时时间
   - 通知日志保存天数

### 通知记录

进入 "支付管理" → "通知记录"，可查看所有通知记录：

- 通知ID
- 关联订单号
- 通知URL
- 通知状态
- 通知次数
- 最后通知时间
- 响应内容

### 手动重发通知

对于通知失败的订单，您可以手动重发通知：

1. 进入 "支付管理" → "通知记录"
2. 找到需要重发通知的记录，点击 "重发" 按钮
3. 系统会立即重新发送通知，并更新通知状态

## 支付统计与分析

PayPHP 码支付系统提供了丰富的统计和分析功能，帮助您了解支付业务情况。

### 交易统计

进入 "支付管理" → "交易统计"，可查看以下数据：

- **交易总览**：总交易额、总订单数、成功率等
- **时间维度**：按日、周、月、年查看交易数据
- **支付方式分布**：各支付方式的交易占比
- **商户分布**：各商户的交易占比
- **时段分析**：不同时间段的交易情况

![交易统计](https://placeholder-image.com/transaction-statistics.jpg)

### 趋势分析

进入 "支付管理" → "趋势分析"，可查看交易趋势图：

- 交易金额趋势
- 订单数量趋势
- 支付成功率趋势
- 不同支付方式的趋势对比

### 报表导出

系统支持将统计数据导出为多种格式：

1. 进入相应的统计页面
2. 点击 "导出" 按钮
3. 选择导出格式（Excel、CSV、PDF）
4. 点击 "确认" 按钮开始导出

## 风控管理

PayPHP 码支付系统内置了风控功能，帮助您防范支付风险。

### 风控规则

进入 "支付管理" → "风控设置" → "规则管理"，可配置以下风控规则：

- **单IP限制**：限制单个IP在一定时间内的支付次数
- **单设备限制**：限制单个设备在一定时间内的支付次数
- **金额限制**：设置单笔交易的最小和最大金额
- **高风险地区**：设置高风险地区的支付限制
- **异常行为检测**：检测短时间内的异常支付行为

### 黑名单管理

进入 "支付管理" → "风控设置" → "黑名单管理"，可管理以下黑名单：

- IP黑名单
- 设备黑名单
- 账号黑名单

### 风控日志

进入 "支付管理" → "风控设置" → "风控日志"，可查看风控系统的拦截记录：

- 拦截时间
- 拦截原因
- 相关订单
- IP地址
- 设备信息

## API对接指南

PayPHP 码支付系统提供了完善的API接口，方便商户系统对接。

### API文档

进入 "支付管理" → "开发文档" → "API文档"，可查看详细的API接口文档：

- 接口地址
- 请求参数
- 响应参数
- 示例代码
- 错误码说明

### 接口测试工具

系统提供了API接口测试工具，帮助开发人员调试接口：

1. 进入 "支付管理" → "开发文档" → "接口测试"
2. 选择要测试的接口
3. 填写测试参数
4. 点击 "发送请求" 按钮
5. 查看请求和响应结果

## 常见问题

### 订单支付成功但商户未收到通知

可能原因：
1. 商户接收通知的URL配置错误
2. 商户系统未正确响应通知
3. 网络问题导致通知发送失败

解决方法：
1. 检查商户通知URL配置
2. 查看通知记录，确认通知状态
3. 手动重发通知

### 支付二维码无法扫描

可能原因：
1. 二维码图片清晰度不足
2. 支付渠道配置错误
3. 订单已过期

解决方法：
1. 调整二维码大小和清晰度
2. 检查支付渠道配置
3. 重新生成订单

### 退款操作失败

可能原因：
1. 支付渠道退款接口配置错误
2. 退款金额超过原订单金额
3. 订单已超过退款期限

解决方法：
1. 检查支付渠道退款配置
2. 确认退款金额正确
3. 联系支付渠道客服处理

## 最佳实践

1. **定期检查支付渠道配置**：支付渠道可能会更新接口参数，定期检查确保配置有效
2. **设置合理的支付超时时间**：根据业务特点设置合适的支付超时时间，避免长时间占用订单号
3. **配置多级通知重试**：设置合理的通知重试机制，确保商户能收到支付结果
4. **定期分析交易数据**：通过统计分析功能，了解支付业务情况，优化支付体验
5. **做好退款预案**：制定完善的退款流程和策略，妥善处理退款请求

通过本文档的指导，您应该能够熟练使用PayPHP码支付系统的支付管理功能，为您的业务提供安全、高效的支付服务。如有更多问题，请参考其他文档或联系技术支持。